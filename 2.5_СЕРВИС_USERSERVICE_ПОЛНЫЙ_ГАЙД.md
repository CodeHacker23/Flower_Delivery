# üß† –°–ï–†–í–ò–° USERSERVICE ‚Äî –ü–û–õ–ù–´–ô –ì–ê–ô–î (–ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´ –° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø–ú–ò)

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–ª—è –∫–æ–≥–æ:** –î–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–Ω—è—Ç—å —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É  
**–°—Ç–∏–ª—å:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ, —Å –º–∞—Ç–æ–º, —é–º–æ—Ä–æ–º –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ—á–∫–∏

---

## üéØ –ß–¢–û –ú–´ –î–ï–õ–ê–ï–ú

–°–æ–∑–¥–∞—ë–º –∫–ª–∞—Å—Å `UserService`, –∫–æ—Ç–æ—Ä—ã–π:
- **–°–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É** —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç** `UserRepository` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç** –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π –∏ —Ç.–¥.

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:**  
–°–µ—Ä–≤–∏—Å ‚Äî —ç—Ç–æ "–º–æ–∑–≥" –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –∑–Ω–∞–µ—Ç **–ß–¢–û –¥–µ–ª–∞—Ç—å** (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞), –∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–Ω–∞–µ—Ç **–ö–ê–ö —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å** (—Ä–∞–±–æ—Ç–∞ —Å –ë–î).

---

## üìä –ê–†–•–ò–¢–ï–ö–¢–£–†–ê: –ú–û–î–ï–õ–¨ ‚Üí –†–ï–ü–û–ó–ò–¢–û–†–ò–ô ‚Üí –°–ï–†–í–ò–°

### –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  HANDLER (–±–æ—Ç, REST API)                ‚îÇ  ‚Üê –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç –∑–¥–µ—Å—å
‚îÇ  "–ß—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?"           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SERVICE (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)               ‚îÇ  ‚Üê "–ß—Ç–æ –¥–µ–ª–∞—Ç—å?" (–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞)
‚îÇ  "–ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?"   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  REPOSITORY (—Ä–∞–±–æ—Ç–∞ —Å –ë–î)               ‚îÇ  ‚Üê "–ö–∞–∫ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î?" (SQL)
‚îÇ  "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î"          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MODEL (—Å—É—â–Ω–æ—Å—Ç—å)                       ‚îÇ  ‚Üê "–ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å?" (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)
‚îÇ  User (id, telegramId, fullName, ...)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ—Ä:**
1. **Handler** –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start` –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Service** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω? –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º!"
3. **Repository** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
4. **Model** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üîß –ß–¢–û –¢–ê–ö–û–ï –°–ï–†–í–ò–° (SERVICE)

### –ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏:

**–°–µ—Ä–≤–∏—Å** ‚Äî —ç—Ç–æ –∫–∞–∫ **–º–µ–Ω–µ–¥–∂–µ—Ä –≤ –º–∞–≥–∞–∑–∏–Ω–µ**.

- **–ö–ª–∏–µ–Ω—Ç (Handler):** "–•–æ—á—É –∫—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä!"
- **–ú–µ–Ω–µ–¥–∂–µ—Ä (Service):** "–û–∫, –ø—Ä–æ–≤–µ—Ä—é –µ—Å—Ç—å –ª–∏ —Ç–æ–≤–∞—Ä, –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä—É—é, –æ—Ñ–æ—Ä–º–ª—é –ø–æ–∫—É–ø–∫—É"
- **–°–∫–ª–∞–¥ (Repository):** "–í–æ—Ç —Ç–æ–≤–∞—Ä, —Å–æ—Ö—Ä–∞–Ω—è—é –≤ –ë–î"

**–ë–µ–∑ —Å–µ—Ä–≤–∏—Å–∞:**
```java
// Handler –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Repository (–ø–ª–æ—Ö–æ!)
User user = userRepository.findByTelegramId(123L);
if (user == null) {
    user = new User();
    user.setTelegramId(123L);
    userRepository.save(user);
}
// –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É (—Ö—É–π–Ω—è!)
```

**–° —Å–µ—Ä–≤–∏—Å–æ–º:**
```java
// Handler —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Service (—Ö–æ—Ä–æ—à–æ!)
User user = userService.registerUser(123L, "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤");
// –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (–∫—Ä–∞—Å–æ—Ç–∞!)
```

---

## üéØ –ó–ê–ß–ï–ú –ù–£–ñ–ï–ù –°–ï–†–í–ò–°

### 1. –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

**–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
- "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑"
- "–¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"
- "–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"

**–ë–µ–∑ —Å–µ—Ä–≤–∏—Å–∞:**  
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Ä–∞–∑–º–∞–∑–∞–Ω–∞ –ø–æ –≤—Å–µ–º—É –∫–æ–¥—É (–≤ Handler, –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö).

**–° —Å–µ—Ä–≤–∏—Å–æ–º:**  
–í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (`UserService`). –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏, –∏–∑–º–µ–Ω–∏—Ç—å, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.

---

### 2. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–ë–µ–∑ —Å–µ—Ä–≤–∏—Å–∞:**
```java
// –í Handler –¥–ª—è –±–æ—Ç–∞
User user = userRepository.findByTelegramId(123L);
if (user == null) {
    user = new User();
    user.setTelegramId(123L);
    userRepository.save(user);
}

// –í REST API (—Ç–∞ –∂–µ –ª–æ–≥–∏–∫–∞, –Ω–æ –∫–æ–¥ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è!)
User user = userRepository.findByTelegramId(123L);
if (user == null) {
    user = new User();
    user.setTelegramId(123L);
    userRepository.save(user);
}
```

**–° —Å–µ—Ä–≤–∏—Å–æ–º:**
```java
// –í Handler –¥–ª—è –±–æ—Ç–∞
User user = userService.registerUser(123L, "–ò–≤–∞–Ω");

// –í REST API (—Ç–æ—Ç –∂–µ –º–µ—Ç–æ–¥!)
User user = userService.registerUser(123L, "–ò–≤–∞–Ω");
```

**–û–¥–∏–Ω –º–µ—Ç–æ–¥ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ!**

---

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ë–µ–∑ —Å–µ—Ä–≤–∏—Å–∞:**  
–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å Handler (—Å–ª–æ–∂–Ω–æ, –Ω—É–∂–Ω–∞ –ë–î).

**–° —Å–µ—Ä–≤–∏—Å–æ–º:**  
–ú–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –æ—Ç–¥–µ–ª—å–Ω–æ, –∑–∞–º–æ–∫–∞–≤ Repository (–ª–µ–≥–∫–æ, –Ω–µ –Ω—É–∂–Ω–∞ –ë–î).

---

## üìù –ê–ù–ù–û–¢–ê–¶–ò–ò SPRING

### `@Service` ‚Äî "–≠—Ç–æ —Å–µ—Ä–≤–∏—Å!"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ì–æ–≤–æ—Ä–∏—Ç Spring: "–≠—Ç–æ —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞–π –¥–ª—è –Ω–µ–≥–æ –±–∏–Ω –∏ –∏—Å–ø–æ–ª—å–∑—É–π –≤–µ–∑–¥–µ –≥–¥–µ –Ω—É–∂–Ω–æ!"

**–ü—Ä–∏–º–µ—Ä:**
```java
@Service
public class UserService {
    // ...
}
```

**–ë–µ–∑ `@Service`:**  
Spring –Ω–µ —Å–æ–∑–¥–∞—Å—Ç –±–∏–Ω, –Ω–µ —Å–º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@Autowired` –≤ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–∞—Ö.

**–° `@Service`:**  
Spring —Å–æ–∑–¥–∞—Å—Ç –±–∏–Ω, –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@Autowired` –≤–µ–∑–¥–µ:
```java
@Autowired
private UserService userService; // Spring —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–∏—Ç!
```

---

### `@RequiredArgsConstructor` ‚Äî "–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å final –ø–æ–ª—è–º–∏"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
Lombok —Å–æ–∑–¥–∞—ë—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–æ –≤—Å–µ–º–∏ `final` –ø–æ–ª—è–º–∏.

**–ü—Ä–∏–º–µ—Ä:**
```java
@Service
@RequiredArgsConstructor
public class UserService {
    private final UserRepository userRepository; // final –ø–æ–ª–µ
}
```

**–ë–µ–∑ `@RequiredArgsConstructor`:**  
–ü—Ä–∏–¥—ë—Ç—Å—è –≤—Ä—É—á–Ω—É—é –ø–∏—Å–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä:
```java
public UserService(UserRepository userRepository) {
    this.userRepository = userRepository;
}
```

**–° `@RequiredArgsConstructor`:**  
Lombok —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä. Spring –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç `UserRepository` (Dependency Injection).

---

### `@Transactional` ‚Äî "–í—Å–µ –º–µ—Ç–æ–¥—ã –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–í—Å–µ –º–µ—Ç–æ–¥—ã –≤ –∫–ª–∞—Å—Å–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î.

**–ü—Ä–∏–º–µ—Ä:**
```java
@Service
@Transactional
public class UserService {
    public User registerUser(Long telegramId, String fullName) {
        // –í—Å—ë –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        User user = new User();
        userRepository.save(user);
        // –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —É–ø–∞–¥—ë—Ç - –≤—Å—ë –æ—Ç–∫–∞—Ç–∏—Ç—Å—è (rollback)
    }
}
```

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:**
- –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (commit)
- –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π ‚Äî –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è (rollback)
- –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

**–ë–µ–∑ `@Transactional`:**  
–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `userRepository.save()` ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —É–ø–∞–¥—ë—Ç –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ ‚Äî —á–∞—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è, —á–∞—Å—Ç—å –Ω–µ—Ç (–±–∞—Ä–¥–∞–∫!).

**–° `@Transactional`:**  
–í—Å—ë –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –õ–∏–±–æ –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ (–ø–æ—Ä—è–¥–æ–∫!).

---

### `@Slf4j` ‚Äî "–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ"

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
Lombok –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `log` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä:**
```java
@Slf4j
public class UserService {
    public User registerUser(Long telegramId, String fullName) {
        log.info("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: telegramId={}, fullName={}", telegramId, fullName);
        // ...
    }
}
```

**–ë–µ–∑ `@Slf4j`:**  
–ü—Ä–∏–¥—ë—Ç—Å—è –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å logger:
```java
private static final Logger log = LoggerFactory.getLogger(UserService.class);
```

**–° `@Slf4j`:**  
Lombok —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç `log`. –ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π `log.info()`, `log.error()`, `log.debug()`.

---

## üéØ –ú–ï–¢–û–î–´ USERSERVICE

### 1. `registerUser(Long telegramId, String fullName)` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ.

**–õ–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ª–∏ —É–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
2. –ï—Å–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î

**–ü—Ä–∏–º–µ—Ä:**
```java
User user = userService.registerUser(123456789L, "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤");
```

---

### 2. `findByTelegramId(Long telegramId)` ‚Äî –ü–æ–∏—Å–∫ –ø–æ Telegram ID

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ù–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID.

**–ü—Ä–∏–º–µ—Ä:**
```java
Optional<User> userOpt = userService.findByTelegramId(123456789L);
if (userOpt.isPresent()) {
    User user = userOpt.get();
    System.out.println(user.getFullName());
}
```

---

### 3. `existsByTelegramId(Long telegramId)` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º Telegram ID.

**–ü—Ä–∏–º–µ—Ä:**
```java
boolean exists = userService.existsByTelegramId(123456789L);
if (exists) {
    System.out.println("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!");
}
```

---

### 4. `getRoleByTelegramId(Long telegramId)` ‚Äî –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü–æ–ª—É—á–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, –∞–∫—Ç–∏–≤–µ–Ω –∏ –∏–º–µ–µ—Ç —Ä–æ–ª—å).

**–õ–æ–≥–∏–∫–∞:**
1. –ò—â–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ª–∏ —Ä–æ–ª—å
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–æ–ª—å –∏–ª–∏ –ø—É—Å—Ç–æ

**–ü—Ä–∏–º–µ—Ä:**
```java
Optional<Role> roleOpt = userService.getRoleByTelegramId(123456789L);
if (roleOpt.isPresent()) {
    Role role = roleOpt.get();
    System.out.println("–†–æ–ª—å: " + role);
}
```

---

### 5. `isAdmin(Long telegramId)` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

**–ü—Ä–∏–º–µ—Ä:**
```java
if (userService.isAdmin(123456789L)) {
    System.out.println("–≠—Ç–æ –∞–¥–º–∏–Ω!");
}
```

---

### 6. `isCourier(Long telegramId)` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É—Ä—å–µ—Ä–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫—É—Ä—å–µ—Ä–æ–º.

**–ü—Ä–∏–º–µ—Ä:**
```java
if (userService.isCourier(123456789L)) {
    System.out.println("–≠—Ç–æ –∫—É—Ä—å–µ—Ä!");
}
```

---

### 7. `isShop(Long telegramId)` ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–≥–∞–∑–∏–Ω–∞

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**  
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–∞–≥–∞–∑–∏–Ω–æ–º.

**–ü—Ä–∏–º–µ—Ä:**
```java
if (userService.isShop(123456789L)) {
    System.out.println("–≠—Ç–æ –º–∞–≥–∞–∑–∏–Ω!");
}
```

---

## üìã –ü–û–õ–ù–´–ô –ö–û–î USERSERVICE

–í–æ—Ç –∫–∞–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –ø–æ–ª–Ω—ã–π –∫–ª–∞—Å—Å `UserService`:

```java
package org.example.flower_delivery.service;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.example.flower_delivery.model.Role;
import org.example.flower_delivery.model.User;
import org.example.flower_delivery.repository.UserRepository;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.Optional;

/**
 * –°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (UserService)
 * 
 * <h2>–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ:</h2>
 * –°–µ—Ä–≤–∏—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
 * - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 * - –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
 * - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π (–∞–¥–º–∏–Ω, –∫—É—Ä—å–µ—Ä, –º–∞–≥–∞–∑–∏–Ω)
 * 
 * <h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</h2>
 * <ul>
 *   <li><b>Handler</b> –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, registerUser)</li>
 *   <li><b>Service</b> –≤—ã–ø–æ–ª–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (–ø—Ä–æ–≤–µ—Ä–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è)</li>
 *   <li><b>Repository</b> —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç/–ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î</li>
 * </ul>
 * 
 * <h2>–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</h2>
 * 
 * <h3>1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h3>
 * <pre>{@code
 * User user = userService.registerUser(123456789L, "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤");
 * }</pre>
 * 
 * <h3>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏:</h3>
 * <pre>{@code
 * if (userService.isAdmin(123456789L)) {
 *     // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥–º–∏–Ω
 * }
 * }</pre>
 * 
 * <h3>3. –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h3>
 * <pre>{@code
 * Optional<User> userOpt = userService.findByTelegramId(123456789L);
 * if (userOpt.isPresent()) {
 *     User user = userOpt.get();
 *     System.out.println(user.getFullName());
 * }
 * }</pre>
 * 
 * @author –ò–ª–∞—Ä–∏–æ–Ω
 * @version 1.0
 * @see org.example.flower_delivery.model.User
 * @see org.example.flower_delivery.repository.UserRepository
 */
@Service  // –ì–æ–≤–æ—Ä–∏—Ç Spring: "–≠—Ç–æ —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞–π –¥–ª—è –Ω–µ–≥–æ –±–∏–Ω!"
@RequiredArgsConstructor  // Lombok: —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–æ –≤—Å–µ–º–∏ final –ø–æ–ª—è–º–∏
@Slf4j  // Lombok: –¥–æ–±–∞–≤–∏—Ç –ø–æ–ª–µ log –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
@Transactional  // –í—Å–µ –º–µ—Ç–æ–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î
public class UserService {
    
    // Spring –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç UserRepository –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Å—é–¥–∞ (Dependency Injection)
    private final UserRepository userRepository;
    
    /**
     * –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return Optional<User> - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω, –∏–Ω–∞—á–µ –ø—É—Å—Ç–æ
     */
    public Optional<User> findByTelegramId(Long telegramId) {
        log.debug("–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID: {}", telegramId);
        return userRepository.findByTelegramId(telegramId);
    }
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º Telegram ID
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return true –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, false –µ—Å–ª–∏ –Ω–µ—Ç
     */
    public boolean existsByTelegramId(Long telegramId) {
        return userRepository.existsByTelegramId(telegramId);
    }
    
    /**
     * –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @param fullName - –§–ò–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
     * @throws IllegalArgumentException –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
     */
    public User registerUser(Long telegramId, String fullName) {
        log.info("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: telegramId={}, fullName={}", telegramId, fullName);
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω?
        if (userRepository.existsByTelegramId(telegramId)) {
            log.warn("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å telegramId={} —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω", telegramId);
            throw new IllegalArgumentException("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω!");
        }
        
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        User user = User.builder()
                .telegramId(telegramId)
                .fullName(fullName)
                .isActive(false)  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω, –∞–¥–º–∏–Ω –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç
                .role(null)  // –†–æ–ª—å –Ω–∞–∑–Ω–∞—á–∏—Ç –∞–¥–º–∏–Ω
                .build();
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
        User savedUser = userRepository.save(user);
        log.info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: id={}", savedUser.getId());
        
        return savedUser;
    }
    
    /**
     * –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω, –∏–Ω–∞—á–µ Optional.empty()
     */
    public Optional<Role> getRoleByTelegramId(Long telegramId) {
        Optional<User> userOpt = userRepository.findByTelegramId(telegramId);
        
        if (userOpt.isEmpty()) {
            log.debug("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å telegramId={} –Ω–µ –Ω–∞–π–¥–µ–Ω", telegramId);
            return Optional.empty();
        }
        
        User user = userOpt.get();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        if (!user.getIsActive()) {
            log.debug("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å telegramId={} –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω", telegramId);
            return Optional.empty();
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –ª–∏ —Ä–æ–ª—å
        if (user.getRole() == null) {
            log.debug("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å telegramId={} –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ä–æ–ª—å", telegramId);
            return Optional.empty();
        }
        
        return Optional.of(user.getRole());
    }
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return true –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, –∞–∫—Ç–∏–≤–µ–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º
     */
    public boolean isAdmin(Long telegramId) {
        Optional<Role> roleOpt = getRoleByTelegramId(telegramId);
        return roleOpt.isPresent() && roleOpt.get() == Role.ADMIN;
    }
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫—É—Ä—å–µ—Ä–æ–º
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return true –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, –∞–∫—Ç–∏–≤–µ–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è –∫—É—Ä—å–µ—Ä–æ–º
     */
    public boolean isCourier(Long telegramId) {
        Optional<Role> roleOpt = getRoleByTelegramId(telegramId);
        return roleOpt.isPresent() && roleOpt.get() == Role.COURIER;
    }
    
    /**
     * –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–∞–≥–∞–∑–∏–Ω–æ–º
     * 
     * @param telegramId - Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     * @return true –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω, –∞–∫—Ç–∏–≤–µ–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è –º–∞–≥–∞–∑–∏–Ω–æ–º
     */
    public boolean isShop(Long telegramId) {
        Optional<Role> roleOpt = getRoleByTelegramId(telegramId);
        return roleOpt.isPresent() && roleOpt.get() == Role.SHOP;
    }
}
```

---

## üéØ –ó–ê–î–ê–ù–ò–ï –î–õ–Ø –¢–ï–ë–Ø

**–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `src/main/java/org/example/flower_delivery/service/UserService.java` –∏ –Ω–∞–ø–∏—à–∏ —Ç—É–¥–∞ –∫–ª–∞—Å—Å `UserService`!**

–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–¥ –≤—ã—à–µ –∫–∞–∫ —à–∞–±–ª–æ–Ω, –Ω–æ:
- **–ù–µ –∫–æ–ø–∏—Ä—É–π —Å–ª–µ–ø–æ** ‚Äî –ø–æ–Ω–∏–º–∞–π –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ—á–∫—É
- **–ß–∏—Ç–∞–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** ‚Äî –æ–Ω–∏ –æ–±—ä—è—Å–Ω—è—é—Ç –∑–∞—á–µ–º –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥
- **–ó–∞–¥–∞–≤–∞–π –≤–æ–ø—Ä–æ—Å—ã** ‚Äî –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –Ω–∞–ø–∏—à–µ—à—å ‚Äî –ø—Ä–∏—à–ª–∏ –∫–æ–¥, –∏ —è —Ä–∞–∑–±–µ—Ä—É –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ—á–∫—É –∏ –ø—Ä–æ–≤–µ—Ä—é —Ç–≤–æ—ë –ø–æ–Ω–∏–º–∞–Ω–∏–µ!

---

## ‚ùì –í–û–ü–†–û–°–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò (–ë–£–î–¨ –ì–û–¢–û–í!)

1. **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@Service`?** (—á—Ç–æ–±—ã Spring –∑–Ω–∞–ª, —á—Ç–æ —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –∏ —Å–æ–∑–¥–∞–ª –¥–ª—è –Ω–µ–≥–æ –±–∏–Ω)

2. **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@Transactional`?** (—á—Ç–æ–±—ã –≤—Å–µ –º–µ—Ç–æ–¥—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ë–î)

3. **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@RequiredArgsConstructor`?** (—á—Ç–æ–±—ã Lombok —Å–æ–∑–¥–∞–ª –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–æ –≤—Å–µ–º–∏ final –ø–æ–ª—è–º–∏)

4. **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@Slf4j`?** (—á—Ç–æ–±—ã Lombok –¥–æ–±–∞–≤–∏–ª –ø–æ–ª–µ log –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è)

5. **–ü–æ—á–µ–º—É –≤ `registerUser` –º—ã –ø—Ä–æ–≤–µ—Ä—è–µ–º `existsByTelegramId` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º?** (—á—Ç–æ–±—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

6. **–ü–æ—á–µ–º—É `getRoleByTelegramId` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Optional<Role>`, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `Role`?** (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å NullPointerException, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω)

---

**–ü–∏—à–∏ –∫–æ–¥, –±–ª—è—Ç—å! –ù–µ –∫–æ–ø–∏—Ä—É–π ‚Äî –ø–æ–Ω–∏–º–∞–π!** üöÄ
