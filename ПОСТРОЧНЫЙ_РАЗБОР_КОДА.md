# üî¨ –ü–û–°–¢–†–û–ß–ù–´–ô –†–ê–ó–ë–û–† –ö–û–î–ê ‚Äî –ö–ê–ñ–î–û–ï –°–õ–û–í–û, –ö–ê–ñ–î–ê–Ø –¢–û–ß–ö–ê –° –ó–ê–ü–Ø–¢–û–ô

**–í–µ—Ä—Å–∏—è:** 1.0 ‚Äî –¢–æ—Ç–∞–ª—å–Ω–æ–µ –ø—Ä–µ–ø–∞—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ  
**–°—Ç–∏–ª—å:** –†–∞–∑–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—É—é —ë–±–∞–Ω—É—é –±—É–∫–≤—É

---

# üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–†–∞–∑–±–æ—Ä Bot.java](#botjava)
2. [–†–∞–∑–±–æ—Ä StartCommandHandler.java](#startcommandhandlerjava)
3. [–†–∞–∑–±–æ—Ä CallbackQueryHandler.java](#callbackqueryhandlerjava)
4. [–†–∞–∑–±–æ—Ä ShopRegistrationHandler.java](#shopregistrationhandlerjava)
5. [–†–∞–∑–±–æ—Ä ShopService.java](#shopservicejava)
6. [–†–∞–∑–±–æ—Ä Entity (User.java)](#userjava)
7. [–†–∞–∑–±–æ—Ä Repository (UserRepository.java)](#userrepositoryjava)
8. [–¢–∏–ø–∏—á–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ Java](#—Ç–∏–ø–∏—á–Ω—ã–µ-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

---

# BOT.JAVA

## –ü–æ–ª–Ω—ã–π –∫–æ–¥ —Å –ø–æ—Å—Ç—Ä–æ—á–Ω—ã–º —Ä–∞–∑–±–æ—Ä–æ–º:

```java
package org.example.flower_delivery;
```

### –°—Ç—Ä–æ–∫–∞ 1: `package`

**–ß—Ç–æ —ç—Ç–æ:** –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞ (package) ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤.

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**
- `package` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ Java, –æ–±—ä—è–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç.
- `org.example.flower_delivery` ‚Äî –∏–º—è –ø–∞–∫–µ—Ç–∞ (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø–∞–ø–æ–∫).
- `;` ‚Äî –∫–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–≤ Java –∫–∞–∂–¥—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ç–æ—á–∫–æ–π —Å –∑–∞–ø—è—Ç–æ–π).

**–ó–∞—á–µ–º –ø–∞–∫–µ—Ç—ã:**
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ (–∫–∞–∫ –ø–∞–ø–∫–∏ –Ω–∞ –∫–æ–º–ø–µ).
- –ò–∑–±–µ–∂–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º—ë–Ω (–º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞ –∫–ª–∞—Å—Å–∞ `User` –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö).
- –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (package-private –≤–∏–¥–∏–º–æ—Å—Ç—å).

**–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–∞–ø–∫–∞–º:**
```
org.example.flower_delivery
 ‚îÇ    ‚îÇ       ‚îÇ
 ‚îÇ    ‚îÇ       ‚îî‚îÄ‚îÄ flower_delivery/
 ‚îÇ    ‚îî‚îÄ‚îÄ example/
 ‚îî‚îÄ‚îÄ org/
 
src/main/java/org/example/flower_delivery/Bot.java
```

---

```java
import lombok.RequiredArgsConstructor;
```

### –°—Ç—Ä–æ–∫–∞: `import`

**–ß—Ç–æ —ç—Ç–æ:** –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–∞–∫–µ—Ç–∞.

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**
- `import` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ, –≥–æ–≤–æ—Ä–∏—Ç "–ø–æ–¥–∫–ª—é—á–∏ –∫–ª–∞—Å—Å –∏–∑ –¥—Ä—É–≥–æ–≥–æ –ø–∞–∫–µ—Ç–∞".
- `lombok` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (Project Lombok).
- `.` ‚Äî —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–∞–∫–µ—Ç–æ–≤.
- `RequiredArgsConstructor` ‚Äî –∏–º—è –∫–ª–∞—Å—Å–∞ (–∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏).
- `;` ‚Äî –∫–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.

**–ó–∞—á–µ–º –∏–º–ø–æ—Ä—Ç:**
–ë–µ–∑ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –ø–∏—Å–∞—Ç—å –ø–æ–ª–Ω–æ–µ –∏–º—è:
```java
@lombok.RequiredArgsConstructor  // –ë–µ–∑ –∏–º–ø–æ—Ä—Ç–∞
@RequiredArgsConstructor          // –° –∏–º–ø–æ—Ä—Ç–æ–º (–∫–æ—Ä–æ—á–µ)
```

**–û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è lombok:**
–ò–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `build.gradle`:
```groovy
compileOnly 'org.projectlombok:lombok'
annotationProcessor 'org.projectlombok:lombok'
```

---

```java
import org.example.flower_delivery.handler.CallbackQueryHandler;
import org.example.flower_delivery.handler.ShopRegistrationHandler;
import org.example.flower_delivery.handler.StartCommandHandler;
```

### –ò–º–ø–æ—Ä—Ç—ã –Ω–∞—à–∏—Ö –∫–ª–∞—Å—Å–æ–≤

**–ß—Ç–æ —ç—Ç–æ:** –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤).

- `org.example.flower_delivery.handler` ‚Äî –ø–∞–∫–µ—Ç `handler` –≤–Ω—É—Ç—Ä–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.
- `CallbackQueryHandler`, `ShopRegistrationHandler`, `StartCommandHandler` ‚Äî –Ω–∞—à–∏ –∫–ª–∞—Å—Å—ã-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.

**–ü–æ—á–µ–º—É –Ω—É–∂–µ–Ω –∏–º–ø–æ—Ä—Ç:**
–≠—Ç–∏ –∫–ª–∞—Å—Å—ã –ª–µ–∂–∞—Ç –≤ –¥—Ä—É–≥–æ–º –ø–∞–∫–µ—Ç–µ (`handler`), –∞ `Bot` ‚Äî –≤ –∫–æ—Ä–Ω–µ–≤–æ–º –ø–∞–∫–µ—Ç–µ. –†–∞–∑–Ω—ã–µ –ø–∞–∫–µ—Ç—ã = –Ω—É–∂–µ–Ω –∏–º–ø–æ—Ä—Ç.

---

```java
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;
```

### –ò–º–ø–æ—Ä—Ç—ã Spring

**–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è:**
–ò–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Spring Boot –≤ `build.gradle`:
```groovy
implementation 'org.springframework.boot:spring-boot-starter'
```

- `@Value` ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è –∏–Ω–∂–µ–∫—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ `application.properties`.
- `@Component` ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Spring-–±–∏–Ω–∞.

---

```java
import org.telegram.telegrambots.bots.TelegramLongPollingBot;
import org.telegram.telegrambots.meta.api.objects.Update;
```

### –ò–º–ø–æ—Ä—Ç—ã Telegram Bot API

**–û—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è:**
–ò–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ `build.gradle`:
```groovy
implementation 'org.telegram:telegrambots:6.9.7.1'
```

- `TelegramLongPollingBot` ‚Äî –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –±–æ—Ç–∞ —Å Long Polling.
- `Update` ‚Äî –æ–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–±—ã—Ç–∏–∏ –æ—Ç Telegram.

---

```java
@Component
@RequiredArgsConstructor
public class Bot extends TelegramLongPollingBot {
```

### –û–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `@Component`
- `@` ‚Äî –Ω–∞—á–∞–ª–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏.
- `Component` ‚Äî –∏–º—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –∏–∑ Spring.

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ì–æ–≤–æ—Ä–∏—Ç Spring: "–°–æ–∑–¥–∞–π —ç–∫–∑–µ–º–ø–ª—è—Ä —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –ø–æ–ª–æ–∂–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä".

**–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º:**
1. Spring —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –ø–∞–∫–µ—Ç—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
2. –ù–∞—Ö–æ–¥–∏—Ç –∫–ª–∞—Å—Å —Å `@Component`.
3. –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç: `new Bot(...)`.
4. –ö–ª–∞–¥—ë—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (Map –±–∏–Ω–æ–≤).
5. –ö–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –ø—Ä–æ—Å–∏—Ç `Bot` ‚Äî Spring –æ—Ç–¥–∞—ë—Ç —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç.

#### `@RequiredArgsConstructor`
–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è Lombok. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –≤—Å–µ—Ö `final` –ø–æ–ª–µ–π.

**–ß—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:**
```java
// Lombok –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
public Bot(StartCommandHandler startCommandHandler,
           CallbackQueryHandler callbackQueryHandler,
           ShopRegistrationHandler shopRegistrationHandler) {
    this.startCommandHandler = startCommandHandler;
    this.callbackQueryHandler = callbackQueryHandler;
    this.shopRegistrationHandler = shopRegistrationHandler;
}
```

#### `public`
–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞. –ö–ª–∞—Å—Å –≤–∏–¥–µ–Ω –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞.

**–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ—Å—Ç—É–ø–∞:**
- `public` ‚Äî –≤–∏–¥–µ–Ω –≤—Å–µ–º.
- `protected` ‚Äî –≤–∏–¥–µ–Ω –≤ –ø–∞–∫–µ—Ç–µ –∏ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞–º.
- (–±–µ–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞) ‚Äî –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –ø–∞–∫–µ—Ç–µ (package-private).
- `private` ‚Äî –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ (–¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤).

#### `class`
–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ Java ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞.

#### `Bot`
–ò–º—è –∫–ª–∞—Å—Å–∞. –ü–æ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ ‚Äî CamelCase —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã.

#### `extends TelegramLongPollingBot`
**–ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.** `Bot` –Ω–∞—Å–ª–µ–¥—É–µ—Ç (—Ä–∞—Å—à–∏—Ä—è–µ—Ç) –∫–ª–∞—Å—Å `TelegramLongPollingBot`.

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- `Bot` –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ –ø–æ–ª—è `TelegramLongPollingBot`.
- `Bot` –î–û–õ–ñ–ï–ù —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–æ–¥–∏—Ç–µ–ª—è.
- `Bot` –ú–û–ñ–ï–¢ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å (`@Override`) –º–µ—Ç–æ–¥—ã —Ä–æ–¥–∏—Ç–µ–ª—è.

**–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã TelegramLongPollingBot:**
- `getBotUsername()` ‚Äî –≤–µ—Ä–Ω—É—Ç—å –∏–º—è –±–æ—Ç–∞.
- `getBotToken()` ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞.
- `onUpdateReceived(Update update)` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–±—ã—Ç–∏–µ.

#### `{`
–ù–∞—á–∞–ª–æ —Ç–µ–ª–∞ –∫–ª–∞—Å—Å–∞.

---

```java
    @Value("${telegram.bot.token}")
    private String botToken;
```

### –ü–æ–ª–µ —Å –∏–Ω–∂–µ–∫—Ü–∏–µ–π –∑–Ω–∞—á–µ–Ω–∏—è

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `@Value("${telegram.bot.token}")`
- `@Value` ‚Äî –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è Spring.
- `"${...}"` ‚Äî –≤—ã—Ä–∞–∂–µ–Ω–∏–µ SpEL (Spring Expression Language).
- `telegram.bot.token` ‚Äî –∏–º—è —Å–≤–æ–π—Å—Ç–≤–∞ –∏–∑ `application.properties`.

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. Spring —á–∏—Ç–∞–µ—Ç `application.properties`:
   ```properties
   telegram.bot.token=7819882941:AAGf...
   ```
2. –ù–∞—Ö–æ–¥–∏—Ç –ø–æ–ª–µ —Å `@Value("${telegram.bot.token}")`.
3. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ: `botToken = "7819882941:AAGf..."`.

**–ß—Ç–æ –µ—Å–ª–∏ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–µ—Ç:**
```java
@Value("${telegram.bot.token}")  // –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ!

@Value("${telegram.bot.token:default}")  // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

#### `private`
–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞. –ü–æ–ª–µ –≤–∏–¥–Ω–æ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ `Bot`.

**–ü–æ—á–µ–º—É private:**
- –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–æ—Å—Ç–∏.
- –¢–æ–∫–µ–Ω ‚Äî —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã —Å–Ω–∞—Ä—É–∂–∏.

#### `String`
–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ‚Äî —Å—Ç—Ä–æ–∫–∞. –ö–ª–∞—Å—Å –∏–∑ `java.lang` (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

#### `botToken`
–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ü–æ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ ‚Äî camelCase —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã.

#### `;`
–ö–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.

---

```java
    private final StartCommandHandler startCommandHandler;
```

### –ü–æ–ª–µ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `private`
–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞ ‚Äî —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞.

#### `final`
**–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ ‚Äî –ø–æ–ª–µ –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.**

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
```java
private final StartCommandHandler startCommandHandler;

// –ü–æ—Å–ª–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ:
this.startCommandHandler = handler;

// –≠—Ç–æ –ù–ï–õ–¨–ó–Ø:
this.startCommandHandler = anotherHandler; // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
```

**–ó–∞—á–µ–º final:**
1. **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è.** –ï—Å–ª–∏ –≥–¥–µ-—Ç–æ —Å–ª—É—á–∞–π–Ω–æ –Ω–∞–ø–∏—à–µ—à—å `startCommandHandler = null` ‚Äî –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –¥–∞—Å—Ç.
2. **Lombok –≤–∏–¥–∏—Ç final** –∏ –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ –≤ `@RequiredArgsConstructor`.
3. **Thread safety** ‚Äî final –ø–æ–ª—è –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.

#### `StartCommandHandler`
–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞—à –∫–ª–∞—Å—Å-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫.

#### `startCommandHandler`
–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

---

```java
    @Override
    public void onUpdateReceived(Update update) {
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `@Override`
–ê–Ω–Ω–æ—Ç–∞—Ü–∏—è Java (–Ω–µ Spring, –Ω–µ Lombok ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è).

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:** –ì–æ–≤–æ—Ä–∏—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É: "–Ø –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é –º–µ—Ç–æ–¥ —Ä–æ–¥–∏—Ç–µ–ª—è".

**–ó–∞—á–µ–º –Ω—É–∂–Ω–∞:**
```java
// –ë–µ–∑ @Override:
public void onUpdateRecieved(Update update) { // –û–ø–µ—á–∞—Ç–∫–∞!
    // –≠—Ç–æ –ù–û–í–´–ô –º–µ—Ç–æ–¥, –∞ –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ!
    // –ú–µ—Ç–æ–¥ —Ä–æ–¥–∏—Ç–µ–ª—è –ù–ï –≤—ã–∑–æ–≤–µ—Ç—Å—è!
}

// –° @Override:
@Override
public void onUpdateRecieved(Update update) { // –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏!
    // –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä: "–¢–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ –Ω–µ—Ç!"
}
```

**@Override –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –æ–ø–µ—á–∞—Ç–æ–∫.**

#### `public`
–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞. –ú–µ—Ç–æ–¥ –≤–∏–¥–µ–Ω –≤—Å–µ–º.

**–ü–æ—á–µ–º—É public:** –ú–µ—Ç–æ–¥ –≤ —Ä–æ–¥–∏—Ç–µ–ª–µ `public` ‚Äî –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –º–µ–Ω–µ–µ –¥–æ—Å—Ç—É–ø–Ω—ã–º.

#### `void`
–¢–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –º–µ—Ç–æ–¥ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.

```java
void doSomething() {
    // –ù–µ –Ω—É–∂–µ–Ω return
}

String getName() {
    return "–ò–º—è"; // –ù—É–∂–µ–Ω return —Å–æ —Å—Ç—Ä–æ–∫–æ–π
}
```

#### `onUpdateReceived`
–ò–º—è –º–µ—Ç–æ–¥–∞. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ `TelegramLongPollingBot`.

#### `(Update update)`
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ—Ç–æ–¥–∞.**

- `Update` ‚Äî —Ç–∏–ø –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–∫–ª–∞—Å—Å –∏–∑ Telegram API).
- `update` ‚Äî –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞).

#### `{`
–ù–∞—á–∞–ª–æ —Ç–µ–ª–∞ –º–µ—Ç–æ–¥–∞.

---

```java
        if (update.hasCallbackQuery()) {
            callbackQueryHandler.handle(update);
            return;
        }
```

### –£—Å–ª–æ–≤–∏–µ –∏ –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `if`
–ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ ‚Äî —É—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä.

#### `(`
–ù–∞—á–∞–ª–æ —É—Å–ª–æ–≤–∏—è.

#### `update`
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî –æ–±—ä–µ–∫—Ç —Ç–∏–ø–∞ `Update`, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ –º–µ—Ç–æ–¥–∞.

#### `.`
–û–ø–µ—Ä–∞—Ç–æ—Ä –¥–æ—Å—Ç—É–ø–∞ –∫ —á–ª–µ–Ω—É –æ–±—ä–µ–∫—Ç–∞ (–º–µ—Ç–æ–¥ –∏–ª–∏ –ø–æ–ª–µ).

#### `hasCallbackQuery()`
–ú–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞ `Update`. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `boolean` (true/false).

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:** –ï—Å—Ç—å –ª–∏ –≤ Update –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ inline-–∫–Ω–æ–ø–∫—É.

#### `)`
–ö–æ–Ω–µ—Ü —É—Å–ª–æ–≤–∏—è.

#### `{`
–ù–∞—á–∞–ª–æ –±–ª–æ–∫–∞ if.

#### `callbackQueryHandler`
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è ‚Äî –Ω–∞—à –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–ø–æ–ª–µ –∫–ª–∞—Å—Å–∞).

#### `.handle(update)`
–í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ `handle` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `update`.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ë–µ—Ä—ë–º –æ–±—ä–µ–∫—Ç `callbackQueryHandler`.
2. –í—ã–∑—ã–≤–∞–µ–º –µ–≥–æ –º–µ—Ç–æ–¥ `handle`.
3. –ü–µ—Ä–µ–¥–∞—ë–º `update` –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.

#### `;`
–ö–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.

#### `return;`
–í—ã—Ö–æ–¥ –∏–∑ –º–µ—Ç–æ–¥–∞. –î–ª—è `void` –º–µ—Ç–æ–¥–æ–≤ ‚Äî –ø—Ä–æ—Å—Ç–æ `return;` –±–µ–∑ –∑–Ω–∞—á–µ–Ω–∏—è.

**–ó–∞—á–µ–º return –∑–¥–µ—Å—å:** –ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ callback ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–µ. –í—ã—Ö–æ–¥–∏–º.

#### `}`
–ö–æ–Ω–µ—Ü –±–ª–æ–∫–∞ if.

---

```java
        if (update.hasMessage() && update.getMessage().hasText()) {
```

### –°–æ—Å—Ç–∞–≤–Ω–æ–µ —É—Å–ª–æ–≤–∏–µ

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `update.hasMessage()`
–ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å—Ç—å –ª–∏ –≤ Update —Å–æ–æ–±—â–µ–Ω–∏–µ?

#### `&&`
–õ–æ–≥–∏—á–µ—Å–∫–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä AND (–ò).

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- `true && true` ‚Üí `true`
- `true && false` ‚Üí `false`
- `false && true` ‚Üí `false`
- `false && false` ‚Üí `false`

**Short-circuit evaluation (–ª–µ–Ω–∏–≤–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ):**
```java
if (update.hasMessage() && update.getMessage().hasText())
//  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
//        –ø–µ—Ä–≤–æ–µ                      –≤—Ç–æ—Ä–æ–µ
```

–ï—Å–ª–∏ –ø–µ—Ä–≤–æ–µ —É—Å–ª–æ–≤–∏–µ `false` ‚Äî –≤—Ç–æ—Ä–æ–µ **–ù–ï –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è**!

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
```java
// –ï—Å–ª–∏ hasMessage() == false, —Ç–æ getMessage() –≤–µ—Ä–Ω—É–ª –±—ã null
// update.getMessage().hasText() ‚Äî NullPointerException!
// –ù–æ –±–ª–∞–≥–æ–¥–∞—Ä—è && –≤—Ç–æ—Ä–æ–µ —É—Å–ª–æ–≤–∏–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
```

#### `update.getMessage()`
–ü–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç `Message` –∏–∑ `Update`.

#### `.hasText()`
–ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å—Ç—å –ª–∏ —Ç–µ–∫—Å—Ç –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏?

---

```java
            String text = update.getMessage().getText();
```

### –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ

**–†–∞–∑–±–æ—Ä –ø–æ —Å–ª–æ–≤–∞–º:**

#### `String`
–¢–∏–ø –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Äî —Å—Ç—Ä–æ–∫–∞.

#### `text`
–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

#### `=`
–û–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è.

#### `update.getMessage().getText()`
–¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤:
1. `update.getMessage()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç `Message`.
2. `.getText()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (String).

#### `;`
–ö–æ–Ω–µ—Ü –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.

---

```java
            if (shopRegistrationHandler.handleMessage(update)) {
                return;
            }
```

### –£—Å–ª–æ–≤–∏–µ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º boolean

**–†–∞–∑–±–æ—Ä:**

#### `shopRegistrationHandler.handleMessage(update)`
–í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `boolean`.

- `true` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (—é–∑–µ—Ä –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).
- `false` ‚Äî –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ (—é–∑–µ—Ä –Ω–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏).

#### –ü–æ—á–µ–º—É –Ω–µ –ø–∏—à–µ–º `== true`:
```java
// –ü–ª–æ—Ö–æ (–∏–∑–±—ã—Ç–æ—á–Ω–æ):
if (shopRegistrationHandler.handleMessage(update) == true)

// –•–æ—Ä–æ—à–æ:
if (shopRegistrationHandler.handleMessage(update))
```

–ú–µ—Ç–æ–¥ —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `boolean`, –Ω–µ –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å `true`.

---

```java
            if (text.equals("/start")) {
                startCommandHandler.handle(update);
            }
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

**–†–∞–∑–±–æ—Ä:**

#### `text.equals("/start")`
–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –º–µ—Ç–æ–¥–æ–º `equals()`.

**–í–ê–ñ–ù–û: –ü–æ—á–µ–º—É –Ω–µ `==`:**
```java
String a = "hello";
String b = new String("hello");

a == b       // false! –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –°–°–´–õ–ö–ò (–∞–¥—Ä–µ—Å–∞ –≤ –ø–∞–º—è—Ç–∏)
a.equals(b)  // true!  –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –°–û–î–ï–†–ñ–ò–ú–û–ï
```

**–ü—Ä–∞–≤–∏–ª–æ:** –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π `.equals()`.

#### `"/start"`
–°—Ç—Ä–æ–∫–æ–≤—ã–π –ª–∏—Ç–µ—Ä–∞–ª ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞.

---

```java
    @Override
    public String getBotUsername() {
        return botUsername;
    }
```

### –ú–µ—Ç–æ–¥ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏—è

**–†–∞–∑–±–æ—Ä:**

#### `public String getBotUsername()`
- `String` ‚Äî —Ç–∏–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è.
- `getBotUsername` ‚Äî –∏–º—è –º–µ—Ç–æ–¥–∞.
- `()` ‚Äî –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

#### `return botUsername;`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `botUsername`.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ö—Ç–æ-—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç `bot.getBotUsername()`.
2. –ú–µ—Ç–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `botUsername`.
3. –í—ã–∑—ã–≤–∞—é—â–∏–π –∫–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç —ç—Ç—É —Å—Ç—Ä–æ–∫—É.

---

# SENDMESSAGE ‚Äî –û–¢–ü–†–ê–í–ö–ê –°–û–û–ë–©–ï–ù–ò–Ø

## –ü–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä –º–µ—Ç–æ–¥–∞:

```java
private void sendMessage(Long chatId, String text) {
```

### –°–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥–∞

**–†–∞–∑–±–æ—Ä:**

#### `private`
–ú–µ—Ç–æ–¥ –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞. –≠—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥.

#### `void`
–ú–µ—Ç–æ–¥ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç.

#### `sendMessage`
–ò–º—è –º–µ—Ç–æ–¥–∞. –ü–æ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ ‚Äî –≥–ª–∞–≥–æ–ª (—á—Ç–æ –¥–µ–ª–∞–µ—Ç).

#### `(Long chatId, String text)`
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `Long chatId` ‚Äî ID —á–∞—Ç–∞ (–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å). `Long` ‚Äî –∫–ª–∞—Å—Å-–æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è `long`.
- `String text` ‚Äî —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è.

---

```java
    SendMessage message = new SendMessage();
```

### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞

**–†–∞–∑–±–æ—Ä:**

#### `SendMessage`
–ö–ª–∞—Å—Å –∏–∑ Telegram Bot API. –ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

**–û—Ç–∫—É–¥–∞:** `import org.telegram.telegrambots.meta.api.methods.send.SendMessage;`

#### `message`
–ò–º—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π.

#### `=`
–ü—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ.

#### `new SendMessage()`
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞.

**–ß—Ç–æ —Ç–∞–∫–æ–µ `new`:**
- `new` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ Java.
- –í—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å –¥–ª—è –æ–±—ä–µ–∫—Ç–∞.
- –í—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä.
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç.

#### `SendMessage()`
–í—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (no-args constructor).

---

```java
    message.setChatId(chatId.toString());
```

### –í—ã–∑–æ–≤ setter-–º–µ—Ç–æ–¥–∞

**–†–∞–∑–±–æ—Ä:**

#### `message`
–û–±—ä–µ–∫—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤—ã—à–µ.

#### `.setChatId(...)`
Setter-–º–µ—Ç–æ–¥. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `chatId`.

**–ü–∞—Ç—Ç–µ—Ä–Ω getter/setter:**
```java
// –í –∫–ª–∞—Å—Å–µ SendMessage:
private String chatId;

public void setChatId(String chatId) {  // Setter
    this.chatId = chatId;
}

public String getChatId() {  // Getter
    return this.chatId;
}
```

#### `chatId.toString()`
–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ `Long` –≤ `String`.

**–ü–æ—á–µ–º—É –Ω—É–∂–Ω–æ:**
- –ù–∞—à –ø–∞—Ä–∞–º–µ—Ç—Ä `chatId` –∏–º–µ–µ—Ç —Ç–∏–ø `Long`.
- –ú–µ—Ç–æ–¥ `setChatId()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `String`.
- –ù—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å.

**–ú–µ—Ç–æ–¥ `toString()`:**
- –ï—Å—Ç—å —É –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ Java (–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `Object`).
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.
- –î–ª—è `Long`: `123456L.toString()` ‚Üí `"123456"`.

---

```java
    message.setText(text);
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞

**–†–∞–∑–±–æ—Ä:**

#### `message.setText(text)`
- `setText(...)` ‚Äî setter –¥–ª—è –ø–æ–ª—è `text`.
- `text` ‚Äî –Ω–∞—à –ø–∞—Ä–∞–º–µ—Ç—Ä –º–µ—Ç–æ–¥–∞ (String).

---

```java
    message.setParseMode("Markdown");
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

**–†–∞–∑–±–æ—Ä:**

#### `setParseMode("Markdown")`
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞.

**–†–µ–∂–∏–º—ã:**
- `"Markdown"` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `*–∂–∏—Ä–Ω—ã–π*`, `_–∫—É—Ä—Å–∏–≤_`, `` `–∫–æ–¥` ``.
- `"HTML"` ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `<b>–∂–∏—Ä–Ω—ã–π</b>`, `<i>–∫—É—Ä—Å–∏–≤</i>`.
- `null` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç.

---

```java
    try {
        bot.execute(message);
    } catch (TelegramApiException e) {
        log.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: chatId={}", chatId, e);
    }
```

### Try-catch –±–ª–æ–∫

**–†–∞–∑–±–æ—Ä:**

#### `try { ... }`
–ë–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ.

**–ß—Ç–æ —Ç–∞–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ:**
- –û—à–∏–±–∫–∞ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.
- –ù–∞–ø—Ä–∏–º–µ—Ä: —Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, Telegram –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.
- –ï—Å–ª–∏ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–ø–∞–¥—ë—Ç.

#### `bot.execute(message)`
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram.

**–ß—Ç–æ —Ç–∞–∫–æ–µ `bot`:**
- –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ —ç—Ç–æ –ø–æ–ª–µ –∫–ª–∞—Å—Å–∞ —Å `@Autowired @Lazy`.
- –≠—Ç–æ –Ω–∞—à –≥–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å `Bot`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç `TelegramLongPollingBot`.

**–ú–µ—Ç–æ–¥ `execute()`:**
- –ú–µ—Ç–æ–¥ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª–∞—Å—Å–∞ `TelegramLongPollingBot`.
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ Telegram API.
- –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å `TelegramApiException`.

#### `catch (TelegramApiException e) { ... }`
–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

**–†–∞–∑–±–æ—Ä:**
- `catch` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ.
- `TelegramApiException` ‚Äî —Ç–∏–ø –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –ª–æ–≤–∏–º.
- `e` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –æ–±—ä–µ–∫—Ç–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è.

#### `log.error("...", chatId, e)`
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏.

**–†–∞–∑–±–æ—Ä:**
- `log` ‚Äî –ª–æ–≥–≥–µ—Ä (–æ—Ç `@Slf4j`).
- `.error(...)` ‚Äî —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ERROR.
- `"–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: chatId={}"` ‚Äî —à–∞–±–ª–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è.
- `chatId` ‚Äî –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ `{}`.
- `e` ‚Äî –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (–≤—ã–≤–æ–¥–∏—Ç—Å—è stack trace).

---

# BUILDER PATTERN

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞:

```java
SendMessage message = SendMessage.builder()
        .chatId(chatId.toString())
        .text(text)
        .parseMode("Markdown")
        .build();
```

### –†–∞–∑–±–æ—Ä:

#### `SendMessage.builder()`
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç `Builder`.

**–ß—Ç–æ —Ç–∞–∫–æ–µ Builder:**
–ü–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —Å –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

#### `.chatId(chatId.toString())`
–ú–µ—Ç–æ–¥ Builder-–∞. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `chatId`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `this` (—Å–∞–º Builder).

**–í–æ–∑–≤—Ä–∞—Ç `this` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ü–µ–ø–æ—á–∫—É:**
```java
builder.chatId(...).text(...).parseMode(...)
//     ‚îî‚îÄ‚îÄ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç builder
//                    ‚îî‚îÄ‚îÄ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç builder
//                                  ‚îî‚îÄ‚îÄ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç builder
```

#### `.text(text)`
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `text`.

#### `.parseMode("Markdown")`
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `parseMode`.

#### `.build()`
–§–∏–Ω–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥. –°–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç `SendMessage` —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Builder:**
1. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å ‚Äî –≤–∏–¥–Ω–æ, —á—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º.
2. –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Äî —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ.
3. –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å immutable –æ–±—ä–µ–∫—Ç—ã.

---

# INLINEKEYBOARDMARKUP ‚Äî –°–û–ó–î–ê–ù–ò–ï –ö–ù–û–ü–û–ö

## –ü–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä:

```java
InlineKeyboardMarkup keyboard = InlineKeyboardMarkup.builder()
        .keyboardRow(List.of(
                InlineKeyboardButton.builder()
                        .text("üè™ –ú–∞–≥–∞–∑–∏–Ω")
                        .callbackData("role_shop")
                        .build(),
                InlineKeyboardButton.builder()
                        .text("üö¥ –ö—É—Ä—å–µ—Ä")
                        .callbackData("role_courier")
                        .build()
        ))
        .build();
```

### –†–∞–∑–±–æ—Ä –ø–æ —á–∞—Å—Ç—è–º:

#### `InlineKeyboardMarkup`
–ö–ª–∞—Å—Å ‚Äî –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏ (–ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º).

**–¢–∏–ø—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤ Telegram:**
- `InlineKeyboardMarkup` ‚Äî –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º.
- `ReplyKeyboardMarkup` ‚Äî –∫–Ω–æ–ø–∫–∏ –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã.

#### `.builder()`
–ü–æ–ª—É—á–∞–µ–º Builder –¥–ª—è `InlineKeyboardMarkup`.

#### `.keyboardRow(...)`
–î–æ–±–∞–≤–ª—è–µ–º —Ä—è–¥ –∫–Ω–æ–ø–æ–∫.

**–ü–∞—Ä–∞–º–µ—Ç—Ä:** `List<InlineKeyboardButton>` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–Ω–æ–ø–æ–∫ –≤ —Ä—è–¥—É.

#### `List.of(...)`
–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ Java 9+. –°–æ–∑–¥–∞—ë—Ç –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π —Å–ø–∏—Å–æ–∫.

**–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:**
```java
// Java 8:
Arrays.asList(button1, button2)

// Java 9+:
List.of(button1, button2)
```

#### `InlineKeyboardButton.builder()`
Builder –¥–ª—è –∫–Ω–æ–ø–∫–∏.

#### `.text("üè™ –ú–∞–≥–∞–∑–∏–Ω")`
–¢–µ–∫—Å—Ç –Ω–∞ –∫–Ω–æ–ø–∫–µ (—á—Ç–æ –≤–∏–¥–∏—Ç —é–∑–µ—Ä).

#### `.callbackData("role_shop")`
–î–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤—è—Ç—Å—è –±–æ—Ç—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏.

**–í–∞–∂–Ω–æ:**
- –ú–∞–∫—Å–∏–º—É–º 64 –±–∞–π—Ç–∞.
- –Æ–∑–µ—Ä –ù–ï –≤–∏–¥–∏—Ç callbackData.
- –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤ `update.getCallbackQuery().getData()`.

#### `.build()`
–°–æ–∑–¥–∞—ë–º –∫–Ω–æ–ø–∫—É.

---

# OPTIONAL ‚Äî –†–ê–ë–û–¢–ê –° –í–û–ó–ú–û–ñ–ù–´–ú –û–¢–°–£–¢–°–¢–í–ò–ï–ú –ó–ù–ê–ß–ï–ù–ò–Ø

## –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ:

```java
Optional<User> userOpt = userRepository.findByTelegramId(telegramId);
```

### –†–∞–∑–±–æ—Ä:

#### `Optional<User>`
Generic-—Ç–∏–ø (–æ–±–æ–±—â—ë–Ω–Ω—ã–π —Ç–∏–ø).

**–ß—Ç–æ —ç—Ç–æ:**
- `Optional` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.
- `<User>` ‚Äî —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø–∞).

**–ó–∞—á–µ–º:**
```java
// –ë–µ–∑ Optional:
User user = userRepository.findByTelegramId(id);
if (user != null) {  // –õ–µ–≥–∫–æ –∑–∞–±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É!
    user.getName();
}

// –° Optional:
Optional<User> userOpt = userRepository.findByTelegramId(id);
userOpt.ifPresent(user -> {  // –Ø–≤–Ω–æ –≤–∏–¥–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å
    user.getName();
});
```

---

## –ú–µ—Ç–æ–¥—ã Optional:

### `isPresent()` / `isEmpty()`

```java
if (userOpt.isPresent()) {
    // –ó–Ω–∞—á–µ–Ω–∏–µ –µ—Å—Ç—å
}

if (userOpt.isEmpty()) {  // Java 11+
    // –ó–Ω–∞—á–µ–Ω–∏—è –Ω–µ—Ç
}
```

### `get()` ‚Äî –û–ü–ê–°–ù–û!

```java
User user = userOpt.get();  // –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî NoSuchElementException!
```

**–ü—Ä–∞–≤–∏–ª–æ:** –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–π `get()` –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ `isPresent()`.

### `orElse(defaultValue)`

```java
User user = userOpt.orElse(defaultUser);
// –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –≤–µ—Ä–Ω—ë—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
// –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤–µ—Ä–Ω—ë—Ç defaultUser
```

### `orElseThrow()`

```java
User user = userOpt.orElseThrow();  // NoSuchElementException –µ—Å–ª–∏ –ø—É—Å—Ç–æ

User user = userOpt.orElseThrow(() -> 
        new IllegalStateException("User not found"));  // –°–≤–æ—ë –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```

**–†–∞–∑–±–æ—Ä –ª—è–º–±–¥—ã:**
- `() ->` ‚Äî –ª—è–º–±–¥–∞-–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
- `new IllegalStateException(...)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `Optional` –ø—É—Å—Ç–æ–π.

### `ifPresent(Consumer)`

```java
userOpt.ifPresent(user -> {
    log.info("User found: {}", user.getName());
});
```

**–†–∞–∑–±–æ—Ä:**
- `ifPresent(...)` ‚Äî –≤—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ, –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å—Ç—å.
- `user -> { ... }` ‚Äî –ª—è–º–±–¥–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `user`.
- `{ ... }` ‚Äî —Ç–µ–ª–æ –ª—è–º–±–¥—ã.

### `map(Function)`

```java
Optional<String> nameOpt = userOpt.map(User::getName);
// –ï—Å–ª–∏ userOpt –ø—É—Å—Ç–æ–π ‚Äî nameOpt —Ç–æ–∂–µ –ø—É—Å—Ç–æ–π
// –ï—Å–ª–∏ userOpt –µ—Å—Ç—å ‚Äî nameOpt —Å–æ–¥–µ—Ä–∂–∏—Ç user.getName()
```

**–†–∞–∑–±–æ—Ä:**
- `map(...)` ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ Optional.
- `User::getName` ‚Äî method reference (—Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ç–æ–¥).

**–ß—Ç–æ —Ç–∞–∫–æ–µ method reference:**
```java
// –≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ:
userOpt.map(user -> user.getName())
userOpt.map(User::getName)
```

---

# –õ–Ø–ú–ë–î–ê-–í–´–†–ê–ñ–ï–ù–ò–Ø

## –ß—Ç–æ —ç—Ç–æ:

–õ—è–º–±–¥–∞ ‚Äî —ç—Ç–æ –∞–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Ñ—É–Ω–∫—Ü–∏—è –±–µ–∑ –∏–º–µ–Ω–∏).

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

```java
// –ü–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
(–ø–∞—Ä–∞–º–µ—Ç—Ä—ã) -> { —Ç–µ–ª–æ }

// –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π (–æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä):
–ø–∞—Ä–∞–º–µ—Ç—Ä -> –≤—ã—Ä–∞–∂–µ–Ω–∏–µ

// –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤):
() -> –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
```

## –ü—Ä–∏–º–µ—Ä—ã:

```java
// –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:
() -> "Hello"

// –û–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ:
x -> x * 2

// –ù–µ—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
(a, b) -> a + b

// –° —Ç–µ–ª–æ–º (–Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤):
(a, b) -> {
    int sum = a + b;
    return sum;
}

// –ë–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞:
user -> log.info("User: {}", user.getName())
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```java
// –í orElseThrow:
.orElseThrow(() -> new RuntimeException("Not found"))

// –í ifPresent:
.ifPresent(user -> sendMessage(chatId, "–ü—Ä–∏–≤–µ—Ç, " + user.getName()))

// –í map:
.map(user -> user.getName())

// –í forEach:
users.forEach(user -> log.info("User: {}", user.getName()))
```

---

# CONCURRENTHASHMAP ‚Äî –ü–û–¢–û–ö–û–ë–ï–ó–û–ü–ê–°–ù–ê–Ø –ö–ê–†–¢–ê

## –ß—Ç–æ —ç—Ç–æ:

```java
private final Map<Long, ShopRegistrationData> registrationDataMap = new ConcurrentHashMap<>();
```

### –†–∞–∑–±–æ—Ä:

#### `Map<Long, ShopRegistrationData>`
–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –∫–∞—Ä—Ç–∞ (—Å–ª–æ–≤–∞—Ä—å, dictionary).

**Generic-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `Long` ‚Äî —Ç–∏–ø –∫–ª—é—á–∞ (telegramId).
- `ShopRegistrationData` ‚Äî —Ç–∏–ø –∑–Ω–∞—á–µ–Ω–∏—è.

**–ß—Ç–æ —Ç–∞–∫–æ–µ Map:**
```java
Map<String, Integer> ages = new HashMap<>();
ages.put("–ò–≤–∞–Ω", 25);      // –î–æ–±–∞–≤–∏—Ç—å
ages.get("–ò–≤–∞–Ω");          // –ü–æ–ª—É—á–∏—Ç—å ‚Üí 25
ages.containsKey("–ò–≤–∞–Ω");  // –ï—Å—Ç—å –ª–∏ –∫–ª—é—á? ‚Üí true
ages.remove("–ò–≤–∞–Ω");       // –£–¥–∞–ª–∏—Ç—å
```

#### `new ConcurrentHashMap<>()`
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Map, –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏.

**–ü–æ—á–µ–º—É –Ω–µ HashMap:**
```java
// HashMap ‚Äî –ù–ï –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω
// –ï—Å–ª–∏ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–∏—à—É—Ç ‚Äî –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è

// ConcurrentHashMap ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–µ–Ω
// –ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å/–ø–∏—Å–∞—Ç—å –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤
```

**–ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω ConcurrentHashMap:**
- Telegram –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Ä–∞–∑–Ω—ã—Ö —é–∑–µ—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
- –ù—É–∂–Ω–∞ –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞.

#### `<>`
Diamond operator (Java 7+). –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–∞–º –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Ç–∏–ø—ã –∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

```java
// –ü–æ–ª–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:
Map<Long, ShopRegistrationData> map = new ConcurrentHashMap<Long, ShopRegistrationData>();

// –° diamond operator:
Map<Long, ShopRegistrationData> map = new ConcurrentHashMap<>();
```

---

# SWITCH ‚Äî –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–¨

## –°–∏–Ω—Ç–∞–∫—Å–∏—Å:

```java
switch (data.getState()) {
    case WAITING_SHOP_NAME:
        handleShopName(chatId, telegramId, text, data);
        break;
    case WAITING_PICKUP_ADDRESS:
        handlePickupAddress(chatId, telegramId, text, data);
        break;
    case WAITING_PHONE:
        handlePhone(chatId, telegramId, text, data);
        break;
    default:
        return false;
}
```

### –†–∞–∑–±–æ—Ä:

#### `switch (data.getState())`
- `switch` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ.
- `data.getState()` ‚Äî –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç enum).

#### `case WAITING_SHOP_NAME:`
- `case` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ.
- `WAITING_SHOP_NAME` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ enum –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.
- `:` ‚Äî –Ω–∞—á–∞–ª–æ –±–ª–æ–∫–∞ case.

#### `break;`
–í—ã—Ö–æ–¥ –∏–∑ switch.

**–í–ê–ñ–ù–û: –ë–µ–∑ break –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç fall-through:**
```java
case A:
    doA();
    // –ù–µ—Ç break!
case B:
    doB();  // –í—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ doA()!
    break;
```

#### `default:`
–ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω case –Ω–µ –ø–æ–¥–æ—à—ë–ª.

---

# ENUM ‚Äî –ü–ï–†–ï–ß–ò–°–õ–ï–ù–ò–ï

## –ß—Ç–æ —ç—Ç–æ:

```java
public enum Role {
    COURIER,
    SHOP,
    ADMIN
}
```

### –†–∞–∑–±–æ—Ä:

#### `public enum Role`
- `enum` ‚Äî –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (enumeration).
- `Role` ‚Äî –∏–º—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è.

#### `COURIER, SHOP, ADMIN`
–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã enum. –ü–æ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏ ‚Äî UPPER_CASE.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

```java
Role role = Role.SHOP;

if (role == Role.SHOP) {
    // –ú–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —á–µ—Ä–µ–∑ ==
}

switch (role) {
    case COURIER: ...
    case SHOP: ...
    case ADMIN: ...
}

// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ enum:
Role role = Role.valueOf("SHOP");  // Role.SHOP

// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ enum –≤ —Å—Ç—Ä–æ–∫—É:
String name = Role.SHOP.name();  // "SHOP"
```

### Enum —Å –ø–æ–ª—è–º–∏:

```java
public enum Role {
    COURIER("–ö—É—Ä—å–µ—Ä"),
    SHOP("–ú–∞–≥–∞–∑–∏–Ω"),
    ADMIN("–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä");

    private final String displayName;

    Role(String displayName) {
        this.displayName = displayName;
    }

    public String getDisplayName() {
        return displayName;
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
Role.SHOP.getDisplayName()  // "–ú–∞–≥–∞–∑–∏–Ω"
```

---

# –¢–ò–ü–ò–ß–ù–´–ï –ö–û–ù–°–¢–†–£–ö–¶–ò–ò

## String.format()

```java
String text = String.format("–ü—Ä–∏–≤–µ—Ç, %s! –¢–≤–æ–π ID: %d", name, id);
```

**–†–∞–∑–±–æ—Ä:**
- `%s` ‚Äî –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç—Ä–æ–∫–∏.
- `%d` ‚Äî –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–∏—Å–ª–∞.
- –ê—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É.

## –¢–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä

```java
String status = shop.getIsActive() ? "–ê–∫—Ç–∏–≤–µ–Ω" : "–ù–µ –∞–∫—Ç–∏–≤–µ–Ω";
```

**–†–∞–∑–±–æ—Ä:**
- `—É—Å–ª–æ–≤–∏–µ ? –∑–Ω–∞—á–µ–Ω–∏–µ_–µ—Å–ª–∏_true : –∑–Ω–∞—á–µ–Ω–∏–µ_–µ—Å–ª–∏_false`

**–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:**
```java
String status;
if (shop.getIsActive()) {
    status = "–ê–∫—Ç–∏–≤–µ–Ω";
} else {
    status = "–ù–µ –∞–∫—Ç–∏–≤–µ–Ω";
}
```

## –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è —Å—Ç—Ä–æ–∫

```java
// –ß–µ—Ä–µ–∑ +:
String text = "–ü—Ä–∏–≤–µ—Ç, " + name + "!";

// –ß–µ—Ä–µ–∑ StringBuilder (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ –¥–ª—è –º–Ω–æ–≥–æ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–π):
StringBuilder sb = new StringBuilder();
sb.append("–ü—Ä–∏–≤–µ—Ç, ");
sb.append(name);
sb.append("!");
String text = sb.toString();

// –ß–µ—Ä–µ–∑ String.format:
String text = String.format("–ü—Ä–∏–≤–µ—Ç, %s!", name);
```

## –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (Java 15+)

```java
String text = """
        üè™ *–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞*
        
        –®–∞–≥ 1 –∏–∑ 3
        –í–≤–µ–¥–∏ *–Ω–∞–∑–≤–∞–Ω–∏–µ* —Ç–≤–æ–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞:
        """;
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é:**
```java
String text = "üè™ *–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞*\n\n" +
        "–®–∞–≥ 1 –∏–∑ 3\n" +
        "–í–≤–µ–¥–∏ *–Ω–∞–∑–≤–∞–Ω–∏–µ* —Ç–≤–æ–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞:";
```

---

# –ò–¢–û–ì–û

**–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å:**

1. **package** ‚Äî –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–ª–∞—Å—Å–æ–≤.
2. **import** ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –¥—Ä—É–≥–∏—Ö –ø–∞–∫–µ—Ç–æ–≤.
3. **–ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏** ‚Äî –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è Spring/Lombok/JPA.
4. **class/extends** ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∏ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ.
5. **–ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–æ—Å—Ç—É–ø–∞** ‚Äî public/private/protected.
6. **final** ‚Äî –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–æ–µ –ø–æ–ª–µ.
7. **@Override** ‚Äî –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞.
8. **void/return** ‚Äî –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è.
9. **if/switch** ‚Äî —É—Å–ª–æ–≤–∏—è.
10. **&&/||** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã.
11. **new** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞.
12. **Setter/Getter** ‚Äî –º–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—è–º.
13. **try/catch** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
14. **Builder pattern** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤.
15. **Optional** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω—ã–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –∑–Ω–∞—á–µ–Ω–∏—è.
16. **–õ—è–º–±–¥—ã** ‚Äî –∞–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.
17. **Map/ConcurrentHashMap** ‚Äî –∫–∞—Ä—Ç—ã.
18. **enum** ‚Äî –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è.

**–¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å —á–∏—Ç–∞—Ç—å –ª—é–±–æ–π Java-–∫–æ–¥ –∏ –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É!** üöÄ
