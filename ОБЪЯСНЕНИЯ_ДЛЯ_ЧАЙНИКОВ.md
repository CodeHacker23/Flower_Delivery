# –û–ë–™–Ø–°–ù–ï–ù–ò–Ø –î–õ–Ø –ß–ê–ô–ù–ò–ö–û–í (–∏–ª–∏ –∫–∞–∫ —è –ø–æ–Ω—è–ª –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É)

## üóÑÔ∏è –ß–¢–û –¢–ê–ö–û–ï –ú–ò–ì–†–ê–¶–ò–ò (FLYWAY/LIQUIBASE)?

### –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ (–∫–∞–∫ –ø—è—Ç–∏–ª–µ—Ç–Ω–µ–º—É):

**–ú–∏–≥—Ä–∞—Ü–∏–∏ = —ç—Ç–æ –∫–∞–∫ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Git –¥–ª—è –ë–î)**

#### –°–∏—Ç—É–∞—Ü–∏—è:
1. **–î–µ–Ω—å 1**: –°–æ–∑–¥–∞–ª —Ç–∞–±–ª–∏—Ü—É `users` —Å –ø–æ–ª—è–º–∏: id, –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω
2. **–î–µ–Ω—å 2**: –ü–æ–Ω—è–ª, —á—Ç–æ –Ω—É–∂–µ–Ω email. –ß—Ç–æ –¥–µ–ª–∞—Ç—å?
   - **–ü–õ–û–•–û**: –ò–¥—Ç–∏ –≤ MySQL, –≤—Ä—É—á–Ω—É—é –¥–µ–ª–∞—Ç—å `ALTER TABLE users ADD email VARCHAR(255)`
   - **–ü–†–û–ë–õ–ï–ú–ê**: –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –¥—Ä—É–≥–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ–µ–∫—Ç–æ–º, —É –Ω–µ–≥–æ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∞—Ä—ã–µ!
   - **–ü–†–û–ë–õ–ï–ú–ê**: –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ - –∫–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å? –í –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?
   - **–ü–†–û–ë–õ–ï–ú–ê**: –ù–∞ –ø—Ä–æ–¥–µ (production) –∑–∞–±—ã–ª –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ - –≤—Å—ë —Å–ª–æ–º–∞–ª–æ—Å—å!

3. **–•–û–†–û–®–û (—Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏)**:
   - –°–æ–∑–¥–∞–ª —Ñ–∞–π–ª `V1__create_users_table.sql` - —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É users
   - –°–æ–∑–¥–∞–ª —Ñ–∞–π–ª `V2__add_email_to_users.sql` - –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ email
   - Flyway –°–ê–ú –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
   - Flyway –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É (V1, –ø–æ—Ç–æ–º V2, –ø–æ—Ç–æ–º V3...)
   - –ï—Å–ª–∏ –Ω–∞ –Ω–æ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–æ–µ–∫—Ç, –∏ Flyway —Å–∞–º —Å–æ–∑–¥–∞—Å—Ç –í–°–ï —Ç–∞–±–ª–∏—Ü—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!

#### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
üìÅ src/main/resources/db/migration/
  ‚îú‚îÄ‚îÄ V1__create_users_table.sql        <- –ü–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ V2__create_shops_table.sql        <- –í—Ç–æ—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
  ‚îú‚îÄ‚îÄ V3__create_orders_table.sql       <- –¢—Ä–µ—Ç—å—è –º–∏–≥—Ä–∞—Ü–∏—è
  ‚îî‚îÄ‚îÄ V4__add_email_to_users.sql        <- –ß–µ—Ç–≤–µ—Ä—Ç–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
```

**Flyway —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `flyway_schema_history` –≤ –ë–î, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç:**
- –ö–∞–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- Checksum (—á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –µ—Å–ª–∏ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è)

**–ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–æ–µ–∫—Ç:**
1. Flyway —Å–º–æ—Ç—Ä–∏—Ç –≤ –ø–∞–ø–∫—É `db/migration`
2. –°–º–æ—Ç—Ä–∏—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `flyway_schema_history` - —á—Ç–æ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ
3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –¢–û–õ–¨–ö–û –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å)
4. –í—Å—ë! –ë–î –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è!

#### Flyway vs Liquibase:

**Flyway:**
- ‚úÖ –ü—Ä–æ—â–µ (SQL —Ñ–∞–π–ª—ã)
- ‚úÖ –ü–æ–Ω—è—Ç–Ω–µ–µ (–≤–∏–¥–∏—à—å SQL –∫–æ–¥)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ
- ‚ùå –ú–µ–Ω–µ–µ –≥–∏–±–∫–∏–π (–Ω–æ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞ –≥–ª–∞–∑–∞)

**Liquibase:**
- ‚úÖ –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π (XML, YAML, JSON)
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚ùå –°–ª–æ–∂–Ω–µ–µ
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ

**–í–´–í–û–î: –ò—Å–ø–æ–ª—å–∑—É–µ–º Flyway - –æ–Ω –ø—Ä–æ—â–µ –∏ –¥–ª—è –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –±–æ–ª–µ–µ —á–µ–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!**

---

## üöÄ –ß–¢–û –¢–ê–ö–û–ï REDIS?

### –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

**Redis = —ç—Ç–æ —Å—É–ø–µ—Ä-–±—ã—Å—Ç—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ "–∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ" –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏**

#### –ó–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

**–ë–ï–ó REDIS (–º–µ–¥–ª–µ–Ω–Ω–æ):**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–∫–∞–∂–∏ –º–Ω–µ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤"
–ë–æ—Ç: *–∏–¥–µ—Ç –≤ MySQL, –¥–µ–ª–∞–µ—Ç SELECT –∑–∞–ø—Ä–æ—Å, –∂–¥–µ—Ç 100-500–º—Å*
–ë–æ—Ç: "–í–æ—Ç —Ç–≤–æ–∏ –∑–∞–∫–∞–∑—ã"
```

**–° REDIS (–±—ã—Å—Ç—Ä–æ):**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü–æ–∫–∞–∂–∏ –º–Ω–µ —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤"
–ë–æ—Ç: *—Å–º–æ—Ç—Ä–∏—Ç –≤ Redis (–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–∫–µ) - –µ—Å—Ç—å? –ï—Å—Ç—å! –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞ 1-5–º—Å*
–ë–æ—Ç: "–í–æ—Ç —Ç–≤–æ–∏ –∑–∞–∫–∞–∑—ã"
```

#### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ:

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –∑–∞–∫–∞–∑–æ–≤**:
   - –ö—É—Ä—å–µ—Ä –∑–∞–ø—Ä–æ—Å–∏–ª —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
   - –ü–µ—Ä–≤—ã–π —Ä–∞–∑ - –∏–¥–µ–º –≤ MySQL, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis –Ω–∞ 5 –º–∏–Ω—É—Ç
   - –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã - –æ—Ç–¥–∞–µ–º –∏–∑ Redis (–≤ 100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)

2. **–°–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
   - –ì–¥–µ –∫—É—Ä—å–µ—Ä —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–æ—Ç–µ? (–∫–∞–∫–æ–µ –º–µ–Ω—é –æ—Ç–∫—Ä—ã—Ç–æ)
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ Redis, —á—Ç–æ–±—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –∑–Ω–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç

3. **–°—á–µ—Ç—á–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**:
   - –°–∫–æ–ª—å–∫–æ –∑–∞–∫–∞–∑–æ–≤ —Å–µ–≥–æ–¥–Ω—è –≤—ã–ø–æ–ª–Ω–µ–Ω–æ? - —Ö—Ä–∞–Ω–∏–º –≤ Redis
   - –û–±–Ω–æ–≤–ª—è–µ–º –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø–∏—Å–∞—Ç—å –≤ MySQL –∫–∞–∂–¥—ã–π —Ä–∞–∑

#### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Redis –ë–ï–ó Docker:

**–í–ê–†–ò–ê–ù–¢ 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (Windows)**

1. –°–∫–∞—á–∞—Ç—å Redis –¥–ª—è Windows: https://github.com/microsoftarchive/redis/releases
2. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å `redis-server.exe`
4. Redis —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ `localhost:6379` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç)

**–í–ê–†–ò–ê–ù–¢ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–π Redis (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞)**

- Redis Cloud: https://redis.com/try-free/
- Upstash: https://upstash.com/ (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ)
- –ü–æ–¥–∫–ª—é—á–∞–µ—à—å—Å—è –ø–æ URL, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—é—Ç

**–í–ê–†–ò–ê–ù–¢ 3: –ü–æ–∫–∞ –ë–ï–ó Redis (–Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ)**

- –ú–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞—Ç—å –±–µ–∑ Redis
- –ö–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –ø–æ–¥—Ä–∞—Å—Ç–µ—Ç –∏ –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ - –¥–æ–±–∞–≤–∏–º Redis
- –ù–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (1-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) MySQL —Å–ø—Ä–∞–≤–∏—Ç—Å—è

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ application.properties:

```properties
# Redis –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º)
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=  # –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –Ω–µ –Ω—É–∂–µ–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–º
```

**–ú–û–ô –°–û–í–ï–¢: –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ –º–æ–∂–µ–º –æ–±–æ–π—Ç–∏—Å—å –ë–ï–ó Redis, –¥–æ–±–∞–≤–∏–º –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —É—Å–∫–æ—Ä–µ–Ω–∏–µ!**

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–¥)

### –ü—Ä–æ–±–ª–µ–º–∞ "–≥–æ–≤–Ω–æ–∫–æ–¥–∞":

**–ü–õ–û–•–û (–≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ):**
```java
// Bot.java - 5000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
// –í—Å—ë –≤–º–µ—Å—Ç–µ: –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–∞ —Å –ë–î, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –≤—Å—ë-–≤—Å—ë
// –ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü —Å–∞–º –Ω–µ —Ä–∞–∑–±–µ—Ä–µ—à—å—Å—è —á—Ç–æ –≥–¥–µ!
```

**–•–û–†–û–®–û (–º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞):**
```
org.example.flower_delivery/
‚îú‚îÄ‚îÄ model/          <- –°—É—â–Ω–æ—Å—Ç–∏ (User, Shop, Order) - —ç—Ç–æ –∫–∞–∫ "—à–∞–±–ª–æ–Ω—ã" –¥–ª—è —Ç–∞–±–ª–∏—Ü –ë–î
‚îú‚îÄ‚îÄ repository/     <- –†–∞–±–æ—Ç–∞ —Å –ë–î (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø–æ–∏—Å–∫) - –∫–∞–∫ "–ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∏" –º–µ–∂–¥—É Java –∏ MySQL
‚îú‚îÄ‚îÄ service/        <- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—á—Ç–æ –î–ï–õ–ê–¢–¨ —Å –¥–∞–Ω–Ω—ã–º–∏) - –º–æ–∑–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ handler/        <- –û–±—Ä–∞–±–æ—Ç–∫–∞ Telegram –∫–æ–º–∞–Ω–¥/—Å–æ–æ–±—â–µ–Ω–∏–π - —É—à–∏ –∏ —Ä–æ—Ç –±–æ—Ç–∞
‚îú‚îÄ‚îÄ config/         <- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–ë–î, Redis, Telegram) - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Spring
‚îî‚îÄ‚îÄ util/           <- –£—Ç–∏–ª–∏—Ç—ã (–≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π) - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —à—Ç—É–∫–∏
```

### –ß—Ç–æ –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### 1. MODEL (–º–æ–¥–µ–ª–∏) - "–§–æ—Ä–º—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è"

**User.java:**
```java
@Entity  // –ì–æ–≤–æ—Ä–∏—Ç Spring: "–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–ª–∞—Å—Å, —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î!"
@Table(name = "users")  // –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –≤ MySQL
public class User {
    @Id  // –≠—Ç–æ –ø–æ–ª–µ - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á (–∫–∞–∫ ID –≤ –ø–∞—Å–ø–æ—Ä—Ç–µ)
    @GeneratedValue  // MySQL —Å–∞–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç ID (1, 2, 3, 4...)
    private Long id;
    
    private Long telegramId;  // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram
    private String fullName;  // –§–ò–û
    // ...
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?**
- JPA —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `users` –≤ MySQL —Å —ç—Ç–∏–º–∏ –ø–æ–ª—è–º–∏
- –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å SQL CREATE TABLE - –≤—Å—ë –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

#### 2. REPOSITORY (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏) - "–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫–∏"

**UserRepository.java:**
```java
public interface UserRepository extends JpaRepository<User, Long> {
    // JPA –¥–∞–µ—Ç —Ç–µ–±–µ –≥–æ—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã:
    // save(user) - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
    // findById(id) - –Ω–∞–π—Ç–∏ –ø–æ ID
    // findAll() - –Ω–∞–π—Ç–∏ –≤—Å–µ—Ö
    // delete(user) - —É–¥–∞–ª–∏—Ç—å
    
    // –ê —ç—Ç–æ –º—ã –ø–∏—à–µ–º —Å–∞–º–∏ (JPA —Å–∞–º –ø–æ–π–º–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å):
    User findByTelegramId(Long telegramId);  // –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?**
- –ù–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã –≤—Ä—É—á–Ω—É—é!
- JPA —Å–∞–º –ø–µ—Ä–µ–≤–æ–¥–∏—Ç Java –∫–æ–¥ –≤ SQL: `findByTelegramId(123)` ‚Üí `SELECT * FROM users WHERE telegram_id = 123`

#### 3. SERVICE (—Å–µ—Ä–≤–∏—Å—ã) - "–ú–æ–∑–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"

**UserService.java:**
```java
@Service  // –ì–æ–≤–æ—Ä–∏—Ç Spring: "–≠—Ç–æ —Å–µ—Ä–≤–∏—Å, –∏—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –≤–µ–∑–¥–µ –≥–¥–µ –Ω—É–∂–Ω–æ!"
public class UserService {
    
    @Autowired  // Spring —Å–∞–º –Ω–∞–π–¥–µ—Ç UserRepository –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç —Å—é–¥–∞
    private UserRepository userRepository;
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public User registerUser(Long telegramId, String fullName) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ—Ç –æ–Ω —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω?
        User existingUser = userRepository.findByTelegramId(telegramId);
        if (existingUser != null) {
            throw new RuntimeException("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –±–ª—è—Ç—å!");
        }
        
        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        User newUser = new User();
        newUser.setTelegramId(telegramId);
        newUser.setFullName(fullName);
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
        return userRepository.save(newUser);
    }
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?**
- –í—Å—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö (–≤ –±–æ—Ç–µ, –≤ REST API, –≥–¥–µ —É–≥–æ–¥–Ω–æ)
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

#### 4. HANDLER (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏) - "–£—à–∏ –∏ —Ä–æ—Ç –±–æ—Ç–∞"

**CourierHandler.java:**
```java
@Component  // Spring –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
public class CourierHandler {
    
    @Autowired
    private UserService userService;
    
    @Autowired
    private OrderService orderService;
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start –¥–ª—è –∫—É—Ä—å–µ—Ä–∞
    public SendMessage handleStart(Update update) {
        Long telegramId = update.getMessage().getFrom().getId();
        
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–µ—Ä–≤–∏—Å (–Ω–µ –ª–µ–∑–µ–º –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î!)
        User user = userService.findByTelegramId(telegramId);
        
        if (user == null) {
            // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º
            user = userService.registerUser(telegramId, "–ö—É—Ä—å–µ—Ä");
        }
        
        return new SendMessage(chatId, "–ü—Ä–∏–≤–µ—Ç, –∫—É—Ä—å–µ—Ä!");
    }
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç?**
- –ö–∞–∂–¥—ã–π handler –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é —Ä–æ–ª—å (Courier, Shop, Admin)
- –ù–µ –ø—É—Ç–∞–µ–º –ª–æ–≥–∏–∫—É —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### 5. CONFIG (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è) - "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏"

**DatabaseConfig.java:**
```java
@Configuration  // –≠—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spring
public class DatabaseConfig {
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î, Redis, –∏ –ø—Ä–æ—á–µ–π —Ö—É–π–Ω–∏
    // Spring —á–∏—Ç–∞–µ—Ç application.properties –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

---

## üéØ –ü–û–ß–ï–ú–£ –≠–¢–ê –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –•–û–†–û–®–ê–Ø?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–†–ê–°–®–ò–†–Ø–ï–ú–û–°–¢–¨**:
   - –ù—É–∂–Ω–∞ –Ω–æ–≤–∞—è —Ñ–∏—á–∞? –î–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ Service, –Ω–æ–≤—ã–π Handler - –Ω–µ —Ç—Ä–æ–≥–∞–µ—à—å —Å—Ç–∞—Ä—ã–π –∫–æ–¥!

2. **–¢–ï–°–¢–ò–†–£–ï–ú–û–°–¢–¨**:
   - –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Å–ª–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ
   - Mock-–∏—à—å Repository, —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å Service - –Ω–µ –Ω—É–∂–Ω–∞ —Ä–µ–∞–ª—å–Ω–∞—è –ë–î!

3. **–ß–ò–¢–ê–ï–ú–û–°–¢–¨**:
   - –ó–Ω–∞–µ—à—å –≥–¥–µ —á—Ç–æ –∏—Å–∫–∞—Ç—å:
     - –ú–æ–¥–µ–ª–∏ ‚Üí model/
     - –†–∞–±–æ—Ç–∞ —Å –ë–î ‚Üí repository/
     - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ‚Üí service/
     - Telegram ‚Üí handler/

4. **–ú–ê–°–®–¢–ê–ë–ò–†–£–ï–ú–û–°–¢–¨**:
   - –ö–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –≤—ã—Ä–∞—Å—Ç–µ—Ç - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
   - –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å—ë —Å –Ω—É–ª—è!

---

## üö® –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï?

1. **–û–±–Ω–æ–≤–∏—Ç—å build.gradle** ‚úÖ (—É–∂–µ —Å–¥–µ–ª–∞–ª)
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å application.properties** (—Ç–æ–∫–µ–Ω, –ë–î)
3. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫** (model, repository, service, handler)
4. **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–µ –º–æ–¥–µ–ª–∏** (User —Å —Ä–æ–ª—è–º–∏)
5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Flyway** (–ø–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è - —Ç–∞–±–ª–∏—Ü–∞ users)
6. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é** (–ø—Ä–æ–≤–µ—Ä–∫–∞ Telegram ID, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–∏)

**–ì–æ—Ç–æ–≤? –ù–∞—á–∏–Ω–∞–µ–º!** üöÄ
